<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Email Sender</title>
  </head>
  <body>
    <div id="app-wrapper">
      <!-- Navigation Bar -->
      <nav id="navbar">
        <div class="nav-brand">
          <img src="/img/Dentklar-logo.svg" alt="DentKlar" class="nav-logo">
        </div>
        <ul class="nav-links">
          <li><a href="#" class="nav-link active" data-page="compose">‚úâÔ∏è Compose</a></li>
          <li><a href="#" class="nav-link" data-page="history">üìã Previous Emails</a></li>
          <li><a href="#" class="nav-link" data-page="templates">üìù Templates</a></li>
          <li><a href="#" class="nav-link" data-page="settings">‚öôÔ∏è Settings</a></li>
        </ul>
      </nav>

      <div id="app-container">
        <!-- Compose Email Page -->
        <div id="compose-page" class="page">
          <h2>‚úâÔ∏è Compose Email</h2>
          
          <form id="email-form">
            <div class="form-group">
              <label for="template-select">Vorlage:</label>
              <select id="template-select" name="template">
                <option value="">-- Vorlage w√§hlen --</option>
              </select>
            </div>

            <div class="form-group">
              <label for="anrede">Anrede:</label>
              <select id="anrede" name="anrede">
                <option value="">-- Bitte w√§hlen --</option>
                <option value="Herr">Herr</option>
                <option value="Frau">Frau</option>
              </select>
            </div>

            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" id="name" name="name" required placeholder="Empf√§ngername">
            </div>

            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" id="email" name="email" required placeholder="empfaenger@example.com">
            </div>

            <div class="form-group">
              <label for="subject">Betreff:</label>
              <input type="text" id="subject" name="subject" placeholder="Email-Betreff">
            </div>

            <div class="form-group">
              <label for="message">Nachricht:</label>
              <textarea id="message" name="message" rows="8" required placeholder="Nachricht eingeben..."></textarea>
            </div>

            <div class="form-group">
              <label>PDF Anhang:</label>
              <div id="drop-zone" class="drop-zone">
                <p class="drop-text">PDF hier ablegen oder <span id="browse-btn" class="browse-link">durchsuchen</span></p>
                <p id="file-name" class="file-name"></p>
              </div>
              <input type="file" id="file-input" accept=".pdf" style="display: none;">
            </div>

            <button type="submit" id="send-btn" class="btn btn-primary">Email senden</button>
          </form>

          <div id="status-message" class="status-message"></div>
        </div>

        <!-- Email History Page -->
        <div id="history-page" class="page" style="display: none;">
          <h2>üìã Previous Emails</h2>
          
          <div class="history-toolbar">
            <input type="text" id="history-search" placeholder="Suchen..." class="search-input">
            <div class="history-stats" id="history-stats"></div>
          </div>

          <div id="history-list" class="history-list">
            <!-- Email history will be populated here -->
          </div>

          <div id="history-status" class="status-message"></div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page" style="display: none;">
          <h2>‚öôÔ∏è SMTP Settings</h2>
          
          <form id="settings-form">
            <div class="form-group">
              <label for="smtp-host">SMTP Host:</label>
              <input type="text" id="smtp-host" name="host" required placeholder="smtp.gmail.com">
            </div>

            <div class="form-group">
              <label for="smtp-port">Port:</label>
              <input type="number" id="smtp-port" name="port" required placeholder="587">
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="smtp-secure" name="secure">
                Use SSL/TLS (port 465)
              </label>
            </div>

            <div class="form-group">
              <label for="smtp-user">Username/Email:</label>
              <input type="text" id="smtp-user" name="user" required placeholder="your.email@example.com">
            </div>

            <div class="form-group">
              <label for="smtp-password">Password:</label>
              <input type="password" id="smtp-password" name="password" required placeholder="Your password or app password">
              <small class="hint">For Gmail, use an App Password (not your regular password)</small>
            </div>

            <div class="button-group">
              <button type="button" id="test-btn" class="btn btn-secondary">Test Connection</button>
              <button type="submit" id="save-settings-btn" class="btn btn-primary">Save Settings</button>
            </div>
          </form>

          <div id="settings-status" class="status-message"></div>
        </div>

        <!-- Template Editor Page -->
        <div id="templates-page" class="page" style="display: none;">
          <h2>üìù Vorlagen verwalten</h2>

          <div class="template-layout">
            <!-- Template List -->
            <div class="template-list-container">
              <div class="template-list-header">
                <h3>Vorlagen</h3>
                <button type="button" id="new-template-btn" class="btn btn-small btn-primary">+ Neu</button>
              </div>
              <ul id="template-list" class="template-list">
                <!-- Templates will be populated here -->
              </ul>
            </div>

            <!-- Template Editor -->
            <div class="template-editor-container">
              <form id="template-form">
                <input type="hidden" id="template-id" value="">
                
                <div class="form-group">
                  <label for="template-name">Name:</label>
                  <input type="text" id="template-name" name="name" required placeholder="Vorlagenname">
                </div>

                <div class="form-group">
                  <label for="template-subject">Betreff:</label>
                  <input type="text" id="template-subject" name="subject" placeholder="Email-Betreff">
                </div>

                <div class="form-group">
                  <label for="template-body">Nachricht:</label>
                  <textarea id="template-body" name="body" rows="12" required placeholder="Nachrichtentext..."></textarea>
                  <small class="hint">Platzhalter: {{ANREDE}}, {{ANREDE_SUFFIX}}, {{NAME}}</small>
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="template-default" name="is_default">
                    Als Standard festlegen
                  </label>
                </div>

                <div class="button-group">
                  <button type="button" id="delete-template-btn" class="btn btn-danger" style="display: none;">L√∂schen</button>
                  <button type="submit" id="save-template-btn" class="btn btn-primary">Speichern</button>
                </div>
              </form>

              <div id="template-status" class="status-message"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/renderer.ts"></script>
  </body>
</html>
